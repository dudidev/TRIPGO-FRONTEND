<app-nav></app-nav>

<section class="categorias">

  <!-- HERO / SLIDER (AUTO) -->
  <div class="hero">
  <div class="hero__split">

    <!-- IZQUIERDA -->
    <div class="hero__half">
      <div class="hero__stack">
        <img class="hero__img" [class.active]="showA" [src]="leftA" alt="Slide izquierda A" />
        <img class="hero__img" [class.active]="!showA" [src]="leftB" alt="Slide izquierda B" />
      </div>
    </div>

    <!-- DERECHA -->
    <div class="hero__half">
      <div class="hero__stack">
        <img class="hero__img" [class.active]="showA" [src]="rightA" alt="Slide derecha A" />
        <img class="hero__img" [class.active]="!showA" [src]="rightB" alt="Slide derecha B" />
      </div>
    </div>

  </div>
</div>


  <!-- PANEL -->
  <div class="panel">

    <!-- IZQUIERDA -->
    <div class="panel__main">
      <h2 class="town-title">
        {{ data?.nombre || (slug | titlecase) }} <span class="pin"></span>
      </h2>


     <!-- BUSCADOR -->
<div class="home__searchWrap">
  <form class="home__search" (ngSubmit)="onSearch()">
    <input
      type="text"
      name="q"
      [(ngModel)]="query"
      placeholder="¿Qué quieres hacer hoy?"
      class="home__searchInput"
    />
    <button class="home__searchBtn" type="submit">Buscar</button>
  </form>
</div>



     <!-- TIPOS (desde BD según ubicación) -->
<div class="cats-grid">

  <!-- loading -->
  <div *ngIf="loadingTipos" style="padding: 8px 0;">
    Cargando tipos...
  </div>

  <!-- empty -->
  <div *ngIf="!loadingTipos && (!tipos || tipos.length === 0)" style="padding: 8px 0;">
    No hay tipos registrados para este pueblo aún.
  </div>

  <!-- cards -->
  <button
    class="cat-card"
    type="button"
    *ngFor="let t of tipos"
    (click)="goTipo(t.id_tipo)"
  >
    <!-- Como no tienes imagen por tipo en BD, dejamos un placeholder (o puedes poner un ícono) -->
    <img
      [src]="'https://via.placeholder.com/600x400?text=' + (t.nombre_tipo | titlecase)"
      [alt]="t.nombre_tipo"
    />
    <span>{{ t.nombre_tipo }}</span>
  </button>
</div>
    </div>

    <!-- DERECHA (FLOTANTE) -->
    <aside class="panel__side">
      <div class="side-card">
        <h3>Sugerencias itinerario</h3>
        <p class="side-sub">selecciona la opción que desees</p>

        <div class="itinerary">
          <button
            class="itinerary__item"
            type="button"
            *ngFor="let it of data?.itinerarios; let i = index"
            (click)="goItinerary(i)"
          >
            <img [src]="it.img" alt="" />
            <span>{{ i + 1 }}. {{ it.titulo }}</span>
          </button>
        </div>
      </div>
    </aside>

  </div>
</section>

<app-footer></app-footer>
