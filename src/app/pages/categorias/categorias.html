<app-nav></app-nav>

<section class="categorias">

  <!-- HERO / SLIDER -->
  <div class="hero">
    <div class="hero__split">

      <div class="hero__half">
        <div class="hero__stack">
          <img class="hero__img" [class.active]="showA" [src]="leftA" />
          <img class="hero__img" [class.active]="!showA" [src]="leftB" />
        </div>
      </div>

      <div class="hero__half">
        <div class="hero__stack">
          <img class="hero__img" [class.active]="showA" [src]="rightA" />
          <img class="hero__img" [class.active]="!showA" [src]="rightB" />
        </div>
      </div>

    </div>
  </div>


  <!-- PANEL -->
  <div class="panel">

    <!-- IZQUIERDA -->
    <div class="panel__main">

      <h2 class="town-title">
        {{ townSlug | titlecase }} <span class="pin"></span>
      </h2>

      <!-- BUSCADOR -->
      <div class="home__searchWrap">
        <form class="home__search" (ngSubmit)="onSearch()">
          <input
            type="text"
            name="q"
            [(ngModel)]="query"
            placeholder="¿Qué quieres hacer hoy?"
            class="home__searchInput"
          />
          <button class="home__searchBtn" type="submit">
            Buscar
          </button>
        </form>
      </div>


      <!-- TIPOS -->
      <div class="cats-grid">

        <!-- Loading -->
        <div *ngIf="loadingTipos" style="padding: 10px 0;">
          Cargando tipos...
        </div>

        <!-- Empty -->
        <div *ngIf="!loadingTipos && tipos.length === 0">
          No hay tipos registrados para este pueblo aún.
        </div>

        <!-- Cards -->
        <button
  class="cat-card"
  type="button"
  *ngFor="let t of tipos"
  (click)="goTipo(t.id_tipo)"
>
  <img
    class="cat-card__img"
    [src]="portadaTipo(t.id_tipo)"
    [alt]="t.nombre_tipo"
  />

  <div class="cat-card__overlay">
    <span class="cat-card__title">
      {{ t.nombre_tipo | titlecase }}
    </span>
  </div>
</button>

      </div>

    </div>


    <!-- DERECHA -->
    <aside class="panel__side">
      <div class="side-card">
        <h3>Sugerencias itinerario</h3>
        <p class="side-sub">selecciona la opción que desees</p>

        <div class="itinerary">
          <button
            class="itinerary__item"
            type="button"
            *ngFor="let it of data?.itinerarios; let i = index"
            (click)="goItinerary(i)"
          >
            <img [src]="it.img" />
            <span>{{ i + 1 }}. {{ it.titulo }}</span>
          </button>
        </div>

      </div>
    </aside>

  </div>
</section>

<app-footer></app-footer>